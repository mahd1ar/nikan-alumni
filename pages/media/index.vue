<template>
  <div dir="rtl">
    <!-- component -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.rawgit.com/shuvroroy/youtube-clone/883c8d9a/public/css/main.css"
    />
    <div class="bg-white font-sans">
      <div class="h-112 bg-cover">
        <img
          src="https://yt3.ggpht.com/HR5bTyedjHyoOd9h2zty2OAqZ3MFM6T7_R48jhdd2rQE2aSPHOD2B-ibdv-yLSTy4_AAF6XdoCk=w2560-fcrop64=1,00005a57ffffa5a8-nd-c0xffffffff-rj-k-no"
          alt="banner"
        />
      </div>
      <div class="bg-grey-lighter -mt-1">
        <div class="container mx-auto">
          <div class="flex items-center justify-between py-4 px-16">
            <div class="flex items-center">
              <img
                class="h-24 w-24 rounded-full"
                src="https://yt3.ggpht.com/-5ny40r8qe90/AAAAAAAAAAI/AAAAAAAAAAA/IrloZ_OeiYc/s288-c-k-no-mo-rj-c0xffffff/photo.jpg"
                alt="channel_logo"
              />
              <div class="mr-6">
                <div class="flex items-center text-2xl font-normal">
                  <span>Fun Fun Function</span>
                  <span
                    class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                    >&#10003;</span
                  >
                </div>
                <p class="font-hairline mt-2 text-sm">126,014 subscribers</p>
              </div>
            </div>
            <div class="text-grey-dark">
              <button
                class="bg-grey-light text-grey-darker mr-4 appearance-none px-3 py-2 text-sm uppercase"
              >
                Subscribed 126K
              </button>
              <span><i class="fa fa-bell fa-lg" aria-hidden="true"></i></span>
            </div>
          </div>
          <div class="px-16">
            <ul class="list-reset flex">
              <li
                class="border-grey-dark border-b-2 border-solid py-3 px-8 text-center"
              >
                <a href="#" class="text-black">Home</a>
              </li>
              <li class="py-3 px-8 text-center">
                <a href="#" class="hover:text-black">Videos</a>
              </li>
              <li class="py-3 px-8 text-center">
                <a href="#" class="hover:text-black">Playlists</a>
              </li>
              <li class="py-3 px-8 text-center">
                <a href="#" class="hover:text-black">Community</a>
              </li>
              <li class="py-3 px-8 text-center">
                <a href="#" class="hover:text-black">Channels</a>
              </li>
              <li class="py-3 px-8 text-center">
                <a href="#" class="hover:text-black">About</a>
              </li>
              <li class="py-3 px-8 text-center">
                <i class="fa fa-search fa-lg text-grey-dark"></i>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container mx-auto flex">
        <div class="mx-16 w-3/4 py-6">
          <div class="border-b pb-8">
            <div class="flex">
              <div class="flex w-3/4">
                <div>
                  <img
                    class="block w-full"
                    src="https://i.ytimg.com/vi/Kcie9rbbb4s/hqdefault.jpg?sqp=-oaymwEXCNACELwBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCbowulw74TtG_RM8mhfoyq3tya9A"
                    alt=""
                  />
                </div>
                <div class="pl-4">
                  <p class="mb-1 h-6 w-64 truncate text-sm font-medium">
                    Habitual negative thoughts
                  </p>
                  <p class="text-grey-darker text-xs">
                    <span>Fun Fun Function</span>
                    <span>&middot;</span>
                    <span>7.5 views</span>
                    <span>&middot;</span>
                    <span>2 days ago</span>
                  </p>
                </div>
              </div>
              <div class="w-1/4">
                <div>
                  <img
                    class="w-100 block"
                    src="https://i.ytimg.com/vi/TubVp9nn32Q/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLAUxQM30HpBNOg3UpiPQUISQgwSlg"
                    alt=""
                  />
                </div>
                <div>
                  <p class="my-2 text-sm font-medium">
                    TDD with Wallaby.js Part 2
                  </p>
                  <p class="text-grey-darker mb-1 text-xs">Fun Fun Function</p>
                  <p class="text-grey-darker text-xs">
                    <span>186 views</span>
                    <span>&middot;</span>
                    <span>3 hours ago</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="border-b">
            <h3 class="py-6 text-base font-medium">
              Best of Fun Fun Function
              <span class="text-grey-dark ml-3 uppercase">Play all</span>
            </h3>
            <div class="relative mb-4 flex">
              <div
                class="text-grey-dark pin-r absolute -mr-3 mt-8 h-10 w-10 rounded-full bg-white text-center shadow-md"
              >
                <i class="fa fa-chevron-right mt-3" aria-hidden="true"></i>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/BMUiFMZr7vk/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCBiAHMlgjlC5lAn12CO1GRPKYgPg"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Higher-order functions - Part 1 of Functional Programming
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    336K views &middot; 2 years ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/BMUiFMZr7vk/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCBiAHMlgjlC5lAn12CO1GRPKYgPg"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Higher-order functions - Part 1 of Functional Programming
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    336K views &middot; 2 years ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/BMUiFMZr7vk/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCBiAHMlgjlC5lAn12CO1GRPKYgPg"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Higher-order functions - Part 1 of Functional Programming
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    336K views &middot; 2 years ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/BMUiFMZr7vk/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCBiAHMlgjlC5lAn12CO1GRPKYgPg"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Higher-order functions - Part 1 of Functional Programming
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    336K views &middot; 2 years ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="border-b">
            <h3 class="py-6 text-base font-medium">
              Uploads
              <span class="text-grey-dark ml-3 uppercase">Play all</span>
            </h3>
            <div class="relative mb-4 flex">
              <div
                class="text-grey-dark pin-r absolute -mr-3 mt-8 h-10 w-10 rounded-full bg-white text-center shadow-md"
              >
                <i class="fa fa-chevron-right mt-3" aria-hidden="true"></i>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/C8p7rHwctAg/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLDnbDWPH7Ef-OV7CVWii7v-0RuSBw"
                    alt=""
                  />
                </div>
                <div class="mb-4 mt-1">
                  <h4 class="text-sm font-medium">
                    Commit editor settings to version control? - Fun Fun
                    Function
                  </h4>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    5.3K views &middot; 4 days ago
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/C8p7rHwctAg/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLDnbDWPH7Ef-OV7CVWii7v-0RuSBw"
                    alt=""
                  />
                </div>
                <div class="mb-4 mt-1">
                  <h4 class="text-sm font-medium">
                    Commit editor settings to version control? - Fun Fun
                    Function
                  </h4>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    5.3K views &middot; 4 days ago
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/C8p7rHwctAg/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLDnbDWPH7Ef-OV7CVWii7v-0RuSBw"
                    alt=""
                  />
                </div>
                <div class="mb-4 mt-1">
                  <h4 class="text-sm font-medium">
                    Commit editor settings to version control? - Fun Fun
                    Function
                  </h4>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    5.3K views &middot; 4 days ago
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/C8p7rHwctAg/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLDnbDWPH7Ef-OV7CVWii7v-0RuSBw"
                    alt=""
                  />
                </div>
                <div class="mb-4 mt-1">
                  <h4 class="text-sm font-medium">
                    Commit editor settings to version control? - Fun Fun
                    Function
                  </h4>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    5.3K views &middot; 4 days ago
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="border-b">
            <div class="py-6">
              <h3 class="text-base font-medium">
                MPJ's Musings
                <span class="text-grey-dark ml-3 uppercase">Play all</span>
              </h3>
              <p
                class="text-grey-dark mt-2 max-w-md text-sm font-normal leading-loose"
              >
                More "soft" episodes about software, creativity, motivation, and
                career.
              </p>
            </div>
            <div class="relative mb-4 flex">
              <div
                class="text-grey-dark pin-r absolute -mr-3 mt-8 h-10 w-10 rounded-full bg-white text-center shadow-md"
              >
                <i class="fa fa-chevron-right mt-3" aria-hidden="true"></i>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/gXfOdwduXqY/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLAUglms6KZMul1UMpuBfFPM5Ddocw"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Why remote working is so hard
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    20K views &middot; 2 months ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/gXfOdwduXqY/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLAUglms6KZMul1UMpuBfFPM5Ddocw"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Why remote working is so hard
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    20K views &middot; 2 months ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/gXfOdwduXqY/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLAUglms6KZMul1UMpuBfFPM5Ddocw"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Why remote working is so hard
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    20K views &middot; 2 months ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/gXfOdwduXqY/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLAUglms6KZMul1UMpuBfFPM5Ddocw"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Why remote working is so hard
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    20K views &middot; 2 months ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="border-b">
            <div class="py-6">
              <h3 class="text-base font-medium">
                Functional programming in Javascript
                <span class="text-grey-dark ml-3 uppercase">Play all</span>
              </h3>
              <p
                class="text-grey-dark mt-2 max-w-md text-sm font-normal leading-loose"
              >
                This is a collection of the videos from FunFunFunction that is
                specifically about functional programming in JavaScript
              </p>
            </div>
            <div class="relative mb-4 flex">
              <div
                class="text-grey-dark pin-r absolute -mr-3 mt-8 h-10 w-10 rounded-full bg-white text-center shadow-md"
              >
                <i class="fa fa-chevron-right mt-3" aria-hidden="true"></i>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/BMUiFMZr7vk/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCBiAHMlgjlC5lAn12CO1GRPKYgPg"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Higher-order functions - Part 1 of Functional Programming in
                    JavaScript
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    20K views &middot; 2 months ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/BMUiFMZr7vk/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCBiAHMlgjlC5lAn12CO1GRPKYgPg"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Higher-order functions - Part 1 of Functional Programming in
                    JavaScript
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    20K views &middot; 2 months ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/BMUiFMZr7vk/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCBiAHMlgjlC5lAn12CO1GRPKYgPg"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Higher-order functions - Part 1 of Functional Programming in
                    JavaScript
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    20K views &middot; 2 months ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
              <div class="mr-1 flex-1">
                <div>
                  <img
                    src="https://i.ytimg.com/vi/BMUiFMZr7vk/hqdefault.jpg?sqp=-oaymwEXCPYBEIoBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLCBiAHMlgjlC5lAn12CO1GRPKYgPg"
                    alt=""
                  />
                </div>
                <div class="mb-4">
                  <h4 class="text-sm font-medium">
                    Higher-order functions - Part 1 of Functional Programming in
                    JavaScript
                  </h4>
                  <p class="font-hairline text-grey-darker mt-2 text-sm">
                    Fun Fun Function
                    <span
                      class="bg-grey-dark text-2xs inline-block h-3 w-3 rounded-full text-center text-white"
                      >&#10003;</span
                    >
                  </p>
                  <p class="font-hairline text-grey-darker mt-1 text-xs">
                    20K views &middot; 2 months ago
                  </p>
                  <p
                    class="text-grey-darker bg-grey-lighter font-hairline text-2xs block inline p-1"
                  >
                    CC
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts">
import Vue from 'vue'
import mediaquery from '@/apollo/queries/videos.gql'
import { VideosQuery, VideosQueryVariables } from '~/types/types'
// eslint-disable-next-line camelcase
import { gregorian_to_jalali, timeout, toIndiaDigits } from '~/data/utils'

function getSize(url: string): Promise<string | null> {
  return new Promise((resolve, reject) => {
    const request = new XMLHttpRequest()
    request.open('HEAD', url, true)

    request.onreadystatechange = () => {
      if (request.readyState >= 2) {
        console.log(request.getAllResponseHeaders())
        resolve(request.getResponseHeader('content-length'))
        request.abort()
      } else resolve(null)
    }

    request.onerror = (e) => {
      reject(e)
    }

    request.send()
  })
}

interface Video {
  href: any
  title: string
  speakers: string
  duration: string
  date: string
  poster?: string
  dataId: string
  _content?: string
  src?: string
  loaded: boolean
}

const secToHour = (secs: number) => {
  secs = ~~secs
  const h = ~~(secs / 3600)
  const m = ~~((secs - h * 3600) / 60)
  const s = ~~(secs - h * 3600 - m * 60)

  return (
    (h / 10).toFixed(1).replace('.', '') +
    ' : ' +
    (m / 10).toFixed(1).replace('.', '') +
    ' : ' +
    (s / 10).toFixed(1).replace('.', '')
  )
}

interface VideoList {
  videos: Video[]
  category: string
  categoryId: string
}

export default Vue.extend({
  data() {
    return {
      items: [] as VideoList[],
    }
  },
  async fetch() {
    const variables: VideosQueryVariables = {
      first: 8,
      parent: 5,
    }

    const { data } = await this.$apollo.query<VideosQuery>({
      query: mediaquery,
      variables,
    })

    if (data.categories?.edges) {
      data.categories.edges.forEach((i) => {
        if (i?.node) {
          const vl: VideoList = {
            videos: [],
            category: i.node.name!,
            categoryId: i.node.id,
          }

          if (!i.node.videos?.nodes) return

          i.node.videos.nodes.forEach((vid) => {
            if (!vid) return

            const v = {} as Video
            const d = vid
              .date!.split('T')[0]
              .split('-')
              .map((i) => Number(i))

            v.date = toIndiaDigits(
              gregorian_to_jalali(d[0], d[1], d[2]).join('/')
            )

            v.title = vid.title || ''

            v.href = vid.id ? '/media/' + encodeURIComponent(vid.id) : '#'

            v.speakers = vid.speakers?.speakers || ''
            v.dataId = ~~(Math.random() * 1000) + ''

            // FIX NEXT LINE LATER
            // TODO : id should be used in url
            v.poster = vid.featuredImageId || undefined

            if (vid.content) {
              // @ts-ignore
              let src = vid.content.match(/<video.*src="(.+)"/)[1]
              src = /\.(.+)?#t=/.test(src) ? src : src + '#t=200'

              v.src = src
            }
            v.duration = ''
            v.loaded = false
            vl.videos.push(v)
          })
          this.items.push(vl)
        }
      })
    }
  },
  mounted() {
    getSize('http://194.5.205.148/vid/TedNikan1.mp4#t=200')
  },

  watch: {
    items() {
      // this.getVideoMeta()
    },
  },
  methods: {
    // getpic(video: HTMLVideoElement) {
    //   const canvas = this.$refs.canvas! as HTMLCanvasElement
    //   canvas
    //     .getContext('2d')!
    //     .drawImage(video, 0, 0, video.videoWidth, video.videoHeight)
    //   return canvas.toDataURL()
    // },
    // async getVideoMeta() {
    //   await timeout(2000)
    //   this.items.forEach((i) => {
    //     i.videos.forEach((v) => {
    //       if (!v.src) return
    //       // const videoElement = document.querySelector(
    //       //   `[data-id="${v.dataId}"] video`
    //       // ) as HTMLVideoElement
    //       const videoElement = document.createElement('video')
    //       videoElement.preload = 'metadata'
    //       videoElement.src = v.src
    //       videoElement.buffered.start(2)
    //       console.log('asdasdasd : ', this.getpic(videoElement))
    //       videoElement.remove()
    //       // if (!videoElement) return
    //       // if (videoElement.duration) {
    //       //   v.duration = secToHour(videoElement.duration)
    //       //   return
    //       // }
    //       console.log(videoElement)
    //       videoElement.onloadedmetadata = () => {
    //         v.duration = secToHour(videoElement.duration)
    //         console.log('durition : ', v.duration)
    //         console.log('asdasdasd : ', this.getpic(videoElement))
    //         console.log('bufferds : ', videoElement.buffered)
    //         alert('remove')
    //         videoElement.remove()
    //       }
    //     })
    //   })
    // },
  },
})
</script>

<style lang="scss" scoped>
.expand-enter-active,
.expand-leave-active {
  transition: all 0.8s;
  max-width: 25%;
  overflow: hidden;
  white-space: nowrap;
  // transition-delay: calc(var(--count) * 75ms);
}
.expand-enter,
.expand-leave-to {
  max-width: 0%;
  opacity: 0;
}
</style>
